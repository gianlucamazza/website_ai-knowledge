# Act Configuration for AI Knowledge Website
# This enables local GitHub Actions testing with real integrations

# Use catthehacker/ubuntu:act-latest for better compatibility
-P ubuntu-latest=catthehacker/ubuntu:act-latest

# Load secrets from .secrets file
--secret-file .secrets

# Load environment variables from .env.act
--env-file .env.act

# Use default container platform
--container-architecture linux/amd64

# Enable verbose logging for debugging
--verbose

# Auto-remove containers after completion for cleaner workspace
--rm

# Use host network for better service connectivity
--network host

# Bind workspace to container with proper permissions
--bind

# Enable artifact server for upload/download actions
--artifact-server-path ./act-artifacts

# Platform-specific runners for comprehensive testing
-P windows-latest=catthehacker/ubuntu:act-latest
-P ubuntu-20.04=catthehacker/ubuntu:act-20.04
-P ubuntu-18.04=catthehacker/ubuntu:act-18.04

# Use real Docker daemon for containers
--use-gitignore=false

# Container options for better performance and compatibility
--container-options --privileged
--container-options --cap-add=SYS_PTRACE
--container-options --cap-add=NET_ADMIN

# Environment variable to indicate running in act
--env ACT=true

# Disable actions cache to avoid issues with setup actions
--no-cache-server